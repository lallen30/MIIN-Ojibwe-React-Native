#!/bin/bash

# Bundle ID Verification and App Store Connect Setup
echo "ğŸ” Bundle ID and App Store Connect Verification"
echo "=============================================="

BUNDLE_ID="com.knoxweb.miin-ojibwe"
echo "ğŸ“‹ Your app's Bundle ID: $BUNDLE_ID"

echo ""
echo "ğŸš¨ CRITICAL: The #1 reason builds don't appear in TestFlight:"
echo "============================================================"
echo "âŒ The Bundle ID doesn't exist in App Store Connect"
echo ""
echo "ğŸ” PLEASE VERIFY IN APP STORE CONNECT:"
echo "======================================"
echo "1. ğŸŒ Go to: https://appstoreconnect.apple.com"
echo "2. ğŸ“± Click 'My Apps'"
echo "3. ğŸ” Look for an app with Bundle ID: $BUNDLE_ID"
echo ""
echo "IF THE APP DOESN'T EXIST:"
echo "========================"
echo "You MUST create the app in App Store Connect FIRST:"
echo "1. ğŸ“± Click the '+' button in My Apps"
echo "2. ğŸ†• Select 'New App'"
echo "3. ğŸ“ Fill in:"
echo "   â€¢ Name: MIIN-Ojibwe"
echo "   â€¢ Bundle ID: $BUNDLE_ID"
echo "   â€¢ Primary Language: English"
echo "4. âœ… Click 'Create'"
echo ""
echo "ONLY THEN can you upload builds to TestFlight!"

echo ""
echo "ğŸ”§ IF THE APP EXISTS BUT BUILDS STILL DON'T APPEAR:"
echo "=================================================="
echo "1. ğŸ“§ Check your email (Apple Developer account email)"
echo "2. ğŸ” In App Store Connect > TestFlight, check:"
echo "   â€¢ iOS Builds tab"
echo "   â€¢ Missing Compliance tab"
echo "   â€¢ Processing status"
echo "3. ğŸ”„ Try the alternative upload method below"

echo ""
echo "ğŸ› ï¸  ALTERNATIVE UPLOAD METHOD (More Reliable):"
echo "=============================================="
echo "Instead of Xcode's Distribute App:"
echo "1. ğŸ“¦ Archive the app (Product > Archive)"
echo "2. ğŸ“¤ In Organizer, select your archive"
echo "3. ğŸ”„ Click 'Distribute App'"
echo "4. ğŸ“± Select 'App Store Connect'"
echo "5. ğŸ“‹ Select 'Export' (NOT Upload)"
echo "6. ğŸ’¾ Save the .ipa file to Desktop"
echo "7. ğŸŒ Go to App Store Connect manually"
echo "8. ğŸ“± Go to your app > TestFlight"
echo "9. â• Click the '+' next to iOS builds"
echo "10. ğŸ“ Select your .ipa file"
echo "11. â¬†ï¸  Upload manually"

echo ""
echo "ğŸ“± Quick App Store Connect Links:"
echo "================================"
echo "â€¢ Main: https://appstoreconnect.apple.com"
echo "â€¢ My Apps: https://appstoreconnect.apple.com/apps"
echo "â€¢ Create App: https://appstoreconnect.apple.com/apps/new"

echo ""
echo "âœ¨ Next Steps:"
echo "============="
echo "1. âœ… Verify the app exists in App Store Connect"
echo "2. âœ… If not, create it with Bundle ID: $BUNDLE_ID"
echo "3. âœ… Try the manual .ipa upload method"
echo "4. âœ… Check email for any rejection reasons"

echo ""
echo "ğŸ’¡ Pro Tip: The app MUST exist in App Store Connect"
echo "   before any builds will appear in TestFlight!"
